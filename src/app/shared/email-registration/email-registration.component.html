<div class="d-flex justify-content-center align-items-center bg-color">
    <div class="my-3">
        <div class="d-flex justify-content-center">
            <img src="assets/img/logo.png" alt="logo" class="logo">
        </div>
        <h3 class="text-center font-weight-bold">Step 1/{{totalSteps}}</h3>
        <mat-card class="mat-elevation-z10 p-5">
            <div class="row mb-1">
                <div class="col-4 pl-2 mb-1">
                    <mat-form-field appearance="fill" class="w-100">
                        <mat-label>Legal First Name</mat-label>
                        <input type="text" matInput placeholder="Legal First Name"
                            [formControl]="registrationForm.controls['firstName']" required>
                        <mat-error
                            *ngIf="registrationForm.controls['firstName'].invalid && registrationForm.controls['firstName'].touched">
                            <small class="font13" *ngIf="registrationForm.get('firstName').errors?.required">
                                Legal First Name is Required
                            </small>
                            <small class="font13" *ngIf="registrationForm.get('firstName').errors?.maxlength">
                                Legal First Name should be less than 50 chracters
                            </small>
                            <small class="font13" *ngIf="registrationForm.get('firstName').errors?.pattern">
                                Legal First Name should contain only alphabets.
                            </small>
                        </mat-error>
                    </mat-form-field>
                </div>
                <div class="col-4 pl-0 mb-1">
                    <mat-form-field appearance="fill" class="w-100">
                        <mat-label>Legal Middle Name</mat-label>
                        <input type="text" matInput placeholder="Legal Middle Name"
                            [formControl]="registrationForm.controls['middleName']" required>
                        <mat-error
                            *ngIf="registrationForm.controls['middleName'].invalid && registrationForm.controls['middleName'].touched">
                            <small class="font13" *ngIf="registrationForm.get('middleName').errors?.required">
                                Legal Middle Name is Required
                            </small>
                            <small class="font13" *ngIf="registrationForm.get('middleName').errors?.maxlength">
                                Legal Middle Name should be less than 50 chracters
                            </small>
                            <small class="font13" *ngIf="registrationForm.get('middleName').errors?.pattern">
                                Legal Middle Name should contain only alphabets.
                            </small>
                        </mat-error>
                    </mat-form-field>
                </div>
                <div class="col-4 pl-0 pr-2 mb-1">
                    <mat-form-field appearance="fill" class="w-100">
                        <mat-label>Legal Last Name</mat-label>
                        <input type="text" matInput placeholder="Legal Last Name"
                            [formControl]="registrationForm.controls['lastName']" required>
                        <mat-error
                            *ngIf="registrationForm.controls['lastName'].invalid && registrationForm.controls['lastName'].touched">
                            <small class="font13" *ngIf="registrationForm.get('lastName').errors?.required">
                                Legal Last Name is Required
                            </small>
                            <small class="font13" *ngIf="registrationForm.get('lastName').errors?.maxlength">
                                Legal Last Name should be less than 50 chracters
                            </small>
                            <small class="font13" *ngIf="registrationForm.get('lastName').errors?.pattern">
                                Legal Last Name should contain only alphabets.
                            </small>
                        </mat-error>
                    </mat-form-field>
                </div>
            </div>

            <div class="row">
                <div *ngIf="roleId == 1" class="col px-2">
                    <mat-form-field appearance="fill" class="w-100">
                        <mat-label>User Name</mat-label>
                        <input type="text" matInput [formControl]="registrationForm.controls['userName']"
                            autocomplete="new-userName" autocapitalize="off" required>
                        <mat-error>
                            <div
                                *ngIf="registrationForm.controls['userName'].invalid && 
                                registrationForm.controls['userName'].touched && registrationForm.controls['userName'].hasError('taken')">
                                <small class="font13">User Name already taken.</small>
                            </div>
                            <div *ngIf="registrationForm.controls['userName'].invalid && 
                                registrationForm.controls['userName'].touched">
                                <small class="font13" *ngIf="registrationForm.get('userName').errors?.required">
                                    User Name is Required
                                </small>
                                <small class="font13" *ngIf="registrationForm.get('userName').errors?.maxlength">
                                    User Name should be less than 25 chracters
                                </small>
                                <small class="font13" *ngIf="registrationForm.get('userName').errors?.minlength">
                                    User Name should be at least 8 chracters
                                </small>
                            </div>
                        </mat-error>
                    </mat-form-field>
                </div>

                <div *ngIf="roleId != 1" class="col px-2">
                    <mat-form-field appearance="fill" class="w-100">
                        <mat-label>Email</mat-label>
                        <input matInput placeholder="abc@xyz.com" [formControl]="registrationForm.controls['userName']"
                            autocomplete="new-Email" autocapitalize="off" required />
                        <mat-error>
                            <div
                                *ngIf="registrationForm.controls['userName'].invalid &&
                                                                   registrationForm.controls['userName'].touched && registrationForm.controls['userName'].hasError('taken')">
                                <small class="font13">Email already taken.</small>
                            </div>
                            <div
                                *ngIf="registrationForm.controls['userName'].invalid &&
                                                                   registrationForm.controls['userName'].touched && !registrationForm.controls['userName'].hasError('taken')">
                                <small class="font13">That doesn't look right.</small>
                            </div>
                        </mat-error>
                    </mat-form-field>
                </div>
            </div>

            <div class="row">
                <mat-form-field appearance="fill" class="w-100 p-2">
                    <mat-label>Password</mat-label>
                    <input type="password" matInput placeholder="Example: Abc@1234"
                        [formControl]="registrationForm.controls['password']" autocomplete="new-password" required>
                    <mat-error>
                        <div
                            *ngIf="registrationForm.get('password').invalid && registrationForm.get('password').touched">
                            <small class="font13" *ngIf="registrationForm.get('password').errors?.minlength">
                                Password must be at least 8 Characters.
                            </small>
                            <small class="font13" *ngIf="registrationForm.get('password').errors?.required ">
                                Password required.
                            </small>
                        </div>
                        <div
                            *ngIf="registrationForm.controls['password'].invalid && registrationForm.controls['password'].touched  &&registrationForm.controls['password'].hasError('invalidPassword')">
                            <small class="font13">
                                Password should contain at least 1 capital, at least 1 lowercase
                                and at least 1 special character.
                            </small>
                        </div>
                    </mat-error>
                </mat-form-field>
            </div>

            <div class="row">
                <mat-form-field appearance="fill" class="w-100 p-2">
                    <mat-label>Confirm Password</mat-label>
                    <input type="password" matInput placeholder="Confirm Password"
                        [formControl]="registrationForm.controls['confirmPassword']" required>
                    <mat-error>
                        <div *ngIf="registrationForm.controls['confirmPassword'].invalid &&  registrationForm.controls['confirmPassword'].touched &&
                               registrationForm.controls['confirmPassword'].hasError('notSamePassword')">
                            <small class="font13">
                                Password does not match
                            </small>
                        </div>
                    </mat-error>
                </mat-form-field>
            </div>
            <p class="font-weight-bold text-center" *ngIf="message">
                <span [ngClass]="{'text-danger' : email == 'EXPIRED_TOKEN'}">
                    {{message}}
                </span>
            </p>
            <div class="row">
                <mat-checkbox class="termCondition-margin ml-2"
                    [formControl]="registrationForm.controls['termCondition']" (click)="openModal(mytemplate)"
                    color="primary">
                    <a>
                        <p class="p-0 m-0 line-height">I accept the <span class="font-weight-bold p-0 m-0">Terms and
                                Conditions</span>
                            of using this website and agree to abide by all applicable
                        </p>
                        <p class="p-0 m-0 line-height"> laws and standards.</p>
                    </a>
                </mat-checkbox>
            </div>
            <div class="d-flex justify-content-between">
                <button [routerLink]="'/login'" mat-button color="primary">
                    Back to Login
                </button>
                <button class="button-purple px-4 py-1 float-right" mat-raised-button
                    [disabled]="registrationForm.invalid || isNextDisabled" (click)="onNextClick()">
                    NEXT
                </button>
            </div>
        </mat-card>
    </div>
</div>

<div>
    <ng-template #mytemplate>
        <div class="col-12">
            <div>
                <p class="disclaimer-heading">
                    DISCLAIMER CONFIRMATION
                </p>
                <p>
                    To confirm you have read and understood our terms and conditions, please read and <span
                        class="font-weight-bold">scroll to the
                        bottom to accept.</span>
                </p>
            </div>
            <div class="border border-dark">
                <mat-card>
                    <p>
                        <span class="disclaimer-heading">TERMS AND CONDITIONS</span>
                    </p>
                    <p class="terms-text pr-3 m-0" (scroll)="onScroll($event)">
                        Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been
                        the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley
                        of type and scrambled it to make a type specimen book. It has survived not only five centuries,
                        but also the leap into electronic typesetting, emaining essentially unchanged.<br> It was
                        popularised in the 1960s with the release of Letraset sheets containing Lorem
                        Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker
                        including versions of Lorem Ipsum.
                        Contrary to popular belief, Lorem Ipsum is not simply random text. It has roots in a piece
                        of classical Latin literature
                        from 45 BC, making it over 2000 years old. Richard McClintock, a Latin professor at
                        Hampden-Sydney College in Virginia,
                        looked up one of the more obscure Latin words, consectetur, from a Lorem Ipsum passage, and
                        going through the cites of
                        the word in classical literature, discovered the undoubtable source. Lorem Ipsum comes from
                        sections 1.10.32 and 1.10.33
                        of "de Finibus Bonorum et Malorum" (The Extremes of Good and Evil) by Cicero, written in 45 BC.
                        This book is a treatise
                        on the theory of ethics, very popular during the Renaissance. The first line of Lorem Ipsum,
                        "Lorem ipsum dolor sit
                        amet..", comes from a line in section 1.10.32.
                        Contrary to popular belief, Lorem Ipsum is not simply random text. It has roots in a piece of
                        classical Latin literature
                        from 45 BC, making it over 2000 years old. Richard McClintock, a Latin professor at
                        Hampden-Sydney College in Virginia,
                        looked up one of the more obscure Latin words, consectetur, from a Lorem Ipsum passage, and
                        going through the cites of
                        the word in classical literature, discovered the undoubtable source. Lorem Ipsum comes from
                        sections 1.10.32 and 1.10.33
                        of "de Finibus Bonorum et Malorum" (The Extremes of Good and Evil) by Cicero, written in 45 BC.
                        This book is a treatise
                        on the theory of ethics, very popular during the Renaissance. The first line of Lorem Ipsum,
                        "Lorem ipsum dolor sit
                        amet..", comes from a line in section 1.10.32.
                    </p>
                </mat-card>
            </div>

            <div>
                <div class="d-flex justify-content-between p-2">
                    <button mat-dialog-close class="px-4 py-1" mat-button color="primary" (click)="onDeclineTerms()">
                        DECLINE
                    </button>
                    <button class="px-4 py-1" mat-raised-button color="primary" mat-dialog-close
                        [disabled]="isAcceptDisabled" (click)="onAcceptTerms()">
                        ACCEPT
                    </button>
                </div>
            </div>
        </div>
    </ng-template>
</div>