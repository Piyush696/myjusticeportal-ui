<div class="d-flex justify-content-between">
    <div>
        <h1 class="font-weight-bold">
            Legal Research Assistant
        </h1>
        <h4 class="line-height">Your completed research results. </h4>
    </div>
    <div>
        <button class="white-btn py-1 padding-btn" mat-raised-button (click)="backToCases()">
            Back To My forms
        </button>
    </div>
</div>

<div class="row">
    <div class="col-8">
        <div class="col-12 p-0">
            <mat-card class="mat-elevation-z10 view-card-color w-100 pt-4">
                <div class="d-flex justify-content-between pb-2">
                    <div>
                        <h3 class="line-height font-weight-bold m-0 pt-3">
                            Your Legal Research Request
                        </h3>
                    </div>
                </div>
                <div>
                    <p class="text-default"><strong class="pr-2">First Name:</strong>
                        <span class="font-weight-normal"> {{reSearchDetails?.inmate?.firstName}}
                            {{reSearchDetails?.inmate?.lastName}}</span>
                    </p>
                </div>
                <div>
                    <p class="text-default"><strong class="pr-2">Middle Initial:</strong>
                        <span class="font-weight-normal">{{reSearchDetails?.inmate?.middleName}}</span>
                    </p>
                </div>
                <div>
                    <p class="text-default"><strong class="pr-2">Last Name:</strong>
                        <span class="font-weight-normal"> {{reSearchDetails?.inmate?.lastName}}</span>
                    </p>
                </div>
                <div>
                    <p class="text-default" *ngIf="reSearchDetails?.inmate?.userId">
                        <strong class="pr-2">Inmate No:</strong>
                        <span class="font-weight-normal"> {{reSearchDetails?.inmate?.userId}}</span>
                    </p>
                </div>
                <div *ngIf="reSearchDetails?.inmate?.userMeta[0].metaValue">
                    <p class="text-default"><strong class="pr-2">Housing Unit:</strong>
                        <span class="font-weight-normal"> {{reSearchDetails?.inmate?.userMeta[0].metaValue}}</span>
                    </p>
                </div>
                <div>
                    <p class="text-default" *ngIf="reSearchDetails?.whoSentYouToJail">
                        <strong class="pr-2">Who sent you to this jail:</strong>
                        <span class="font-weight-normal"> {{reSearchDetails?.whoSentYouToJail}}</span>
                    </p>
                </div>
                <div>
                    <p class="text-default" *ngIf="reSearchDetails?.nextCourtDate">
                        <strong class="pr-2">Your next court date:</strong>
                        <span class="font-weight-normal"> {{reSearchDetails?.nextCourtDate |date: 'MM-dd-yyyy'}}</span>
                    </p>
                </div>
                <div>
                    <p class="text-default" *ngIf="reSearchDetails?.currentCharges">
                        <strong class="pr-2"> List your current charges:</strong>
                        <span class="font-weight-normal"> {{reSearchDetails?.currentCharges}}</span>
                    </p>
                </div>
                <div>
                    <p class="text-default">
                        <strong class="pr-2">Have you been convicted:</strong>
                        <span class="font-weight-normal" *ngIf="reSearchDetails?.convicted == true">Yes</span>
                        <span class="font-weight-normal" *ngIf="reSearchDetails?.convicted ==false">No</span>
                    </p>
                </div>
                <div>
                    <p class="text-default">
                        <strong class="pr-2">Have you been sentenced:</strong>
                        <span class="font-weight-normal" *ngIf="reSearchDetails?.sentenced == true">Yes</span>
                        <span class="font-weight-normal" *ngIf="reSearchDetails?.sentenced ==false">No</span>
                    </p>
                </div>
                <div>
                    <p class="text-default" *ngIf="reSearchDetails?.researchedMatter">
                        <strong class="pr-2"> The matter I’m researching has to do with:</strong>
                        <span class="font-weight-normal"> {{reSearchDetails?.researchedMatter}}</span>
                    </p>
                </div>
                <div>
                    <p class="text-default">
                        <strong class="pr-2">Are you "Pro Se" in the matter you are researching? ("Pro Se" means you are
                            representing
                            yourself.):</strong>
                        <span class="font-weight-normal" *ngIf="reSearchDetails?.areYou_Pro_se == true">Yes</span>
                        <span class="font-weight-normal" *ngIf="reSearchDetails?.areYou_Pro_se ==false">No</span>
                    </p>
                </div>
                <div>
                    <p class="text-default">
                        <strong class="pr-2">If not "Pro Se", do you have a lawyer currently representing you in this matter?</strong>
                        <span class="font-weight-normal" *ngIf="reSearchDetails?.lawyerRepresentingMatter == true">Yes</span>
                        <span class="font-weight-normal" *ngIf="reSearchDetails?.lawyerRepresentingMatter ==false">No</span>
                    </p>
                </div>
                <div>
                    <p class="text-default">
                        <strong class="pr-2">The lawyer representing you (if any) is…</strong>
                        <span class="font-weight-normal" *ngIf="reSearchDetails?.selectLawyerRepresenting">{{reSearchDetails?.selectLawyerRepresenting}}</span>
                    </p>
                </div>
                <div>
                    <p class="text-default">
                        <strong class="pr-2">What is the jurisdiction of the legal matter you are researching?</strong>
                        <span class="font-weight-normal" *ngIf="reSearchDetails?.selectLawyerRepresenting">{{reSearchDetails?.juridictionLegalMatter}}</span>
                    </p>
                </div>
                <div *ngIf="reSearchDetails?.juridictionLegalMatter === 'Other state (Complete next field)'">
                    <p class="text-default">
                        <strong class="pr-2">Other State</strong>
                        <span class="font-weight-normal" *ngIf="reSearchDetails?.selectLawyerRepresenting">{{reSearchDetails?.otherState}}</span>
                    </p>
                </div>
            </mat-card>
        </div>
    </div>
    <div class="col-12 px-3 mt-3">
        <mat-card class="d-flex justify-content-between mat-elevation-z10 view-card-color">
            <div>
                <h3 class="font-weight-bold mb-2">My Private Case Notes:</h3>
                <div class="notes">
                    <span>{{reSearchDetails?.notes}}</span>
                    <span *ngIf="!reSearchDetails?.notes" class="text-danger">
                        No Notes have been added. Click the edit button to add a note.
                    </span>
                </div>
            </div>
            <div class="pl-2">
                <button class="button-purple" mat-mini-fab title="Add/Edit Note"
                    (click)="openModal(managenotesModel,reSearchDetails.legalResearchId)">
                    <mat-icon>edit</mat-icon>
                </button>
            </div>
        </mat-card>
    </div>

    <div class="col-12 px-3 mt-3">
        <app-upload-file></app-upload-file>
    </div>
</div>

<ng-template #managenotesModel>
    <div class="d-flex justify-content-start p-0">
        <h3 class="font-weight-bold pl-2">Legal Form Notes Form:</h3>
    </div>
    <div class="row">
        <div class="col-md-12">
            <mat-form-field appearance="fill" class="w-100 p-2">
                <textarea rows="10" matInput [formControl]="legalFormNoteForm.controls['notes']"></textarea>
                <mat-error>
                    <div *ngIf="legalFormNoteForm.controls['notes'].invalid && legalFormNoteForm.controls['notes'].touched">
                        <small class="font13">
                            Notes is Required
                        </small>
                    </div>
                </mat-error>
            </mat-form-field>
        </div>
    </div>
    <div class="d-flex justify-content-between p-1">
        <button mat-raised-button class="button-purple mt-2 px-4 py-1" (click)="onCancelNotesModal()">
            Cancel
        </button>
        <button mat-raised-button color="primary" class="px-4 py-1 mt-2" [disabled]="legalFormNoteForm.get('notes').invalid"
            (click)="onSaveChanges()">
            Save
        </button>
    </div>
</ng-template>