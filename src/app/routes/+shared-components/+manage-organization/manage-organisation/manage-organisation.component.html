<div class="p-0 d-flex">
    <div class="col-5 px-0">
        <div>
            <h1 class="font-weight-bold m-0">Manage Organization</h1>
            <h4 class="line-height header-sub-text">
                Manage your Organization information
            </h4>
        </div>
    </div>
    <div class="col-7 px-0">
        <div class="d-flex justify-content-end">
            <div>
                <button mat-raised-button class="button-purple px-4 py-1" (click)="openModal(inviteEmail)">
                    Invite New User
                </button> &nbsp;
            </div>

            <div>
                <button [routerLink]="'users'" class="button-purple px-4 py-1" mat-raised-button>
                    View All Users
                </button> &nbsp;
            </div>
        </div>
    </div>

    <!-- <div>
    <button [routerLink]="'facilities'" class="button-purple px-4 py-1" mat-raised-button>
      Manage Facilities
    </button>
  </div> -->

</div>

<div class="row">
    <div class="col-12 pt-2">
        <mat-card class="mat-elevation-z10">
            <h1 class="font-weight-bold">Profile Information</h1>
            <table style="width:100%">
                <tr>
                    <th>Organization Name</th>
                    <td>{{orgData?.Organization?.name}}</td>
                </tr>
                <tr>
                    <th>Primary Address</th>
                    <td>{{orgData?.Organization?.Address?.street1}} {{orgData?.Organization?.Address?.street2}} ,
                        {{orgData?.Organization?.Address?.city}}, {{orgData?.Organization?.Address?.state}}
                        ,{{orgData?.Organization?.Address?.zip}}
                    </td>
                </tr>
                <tr>
                    <th>Practice Areas</th>
                    <td>{{orgData?.Organization?.specialty}}</td>
                </tr>
                <tr>
                    <th>Tagline</th>
                    <td>{{orgData?.Organization?.tagline}}</td>
                </tr>
                <tr>
                    <th>Organization Statement</th>
                    <td>{{orgData?.Organization?.description}}</td>
                </tr>
                <tr>
                    <th>Logo Upload</th>
                    <img src="{{orgData?.Organization?.logo?.downloadLink}}" width="250px" height="150px" alt="logo">
                </tr>
                <tr>
                    <th>Header Color</th>
                    <td>{{orgData?.Organization?.colorPiker}}</td>
                </tr>
            </table>
            <div class="row">
                <div class="col-12 col-sm-12 d-flex justify-content-between justify-content-sm-between">
                    <div>
                        <button mat-raised-button class="button-purple px-4 py-1 mt-1"
                            (click)="openOrgPreviewModal(previewOrganization)">Preview</button>
                    </div>
                    <div>
                        <button mat-raised-button class="button-purple px-4 py-1 mt-1"
                            (click)="openOrganizationModal(updateOrganization)">Change</button>
                    </div>
                </div>
            </div>
        </mat-card>
    </div>
</div>

<ng-template #previewOrganization>
    <div class="pt-2">
        <mat-card class="border border-dark padd_mat py-0">
            <div class="mt-2 background-org-logo" id="cust-img">
            </div>
            <div class="d-flex justify-content-between align-items-between">
                <div>
                    <span class="title-style">
                        <!-- {{orgData?.Organization?.tagline}} -->
                    </span>
                </div>
                <div>
                    <button class="white-btn padding-btn btn-outline float-right py-1 mt-1" mat-raised-button
                        (click)="onCloseModal()">
                        Close
                    </button>
                </div>

            </div>
            <div class="row p-4">
                <div class="col-4">
                    <h3 class="font-weight-bold">Organization Information:</h3>
                    <span class="font-weight-bold">Organization Name:
                        <span class="font-weight-light text-dark">{{orgData?.Organization?.name}}
                            <!-- {{orgData?.orgCode}} -->
                        </span>
                    </span><br>
                    <span class="font-weight-bold">Tagline:
                        <span class="font-weight-light text-dark"> {{orgData?.Organization?.tagline}}
                        </span>
                    </span>
                    <br>
                    <span class="font-weight-bold">Primary Address:
                        <span class="font-weight-light text-dark"> {{orgData?.Organization?.Address?.street1}}
                            {{orgData?.Organization?.Address?.street2}}</span>
                        <span class="font-weight-light text-dark"> {{orgData?.Organization?.Address?.city}}
                            {{orgData?.Organization?.Address?.zip}}</span>
                    </span>
                    <br>
                    <span class="font-weight-bold">Practice areas: </span>
                    <br>
                    <ul class="m-0">
                        <li class="text-dark">{{orgData?.Organization?.specialty}}</li>
                    </ul>
                </div>
                <div class="col-8">
                    <h3 class="font-weight-bold">Organization Statement:</h3>
                    <span class="text-dark">{{orgData?.Organization?.description}}</span>
                </div>
            </div>
        </mat-card>
    </div>
</ng-template>

<ng-template #inviteEmail>
    <div>
        <h2 class="font-weight-bold">Invite User.</h2>
    </div>
    <div>
        <div class="row">
            <div class="col-12">
                <mat-form-field appearance="fill" class="w-100 py-1">
                    <mat-label>Email</mat-label>
                    <input type="email" matInput placeholder="Email" [formControl]="inviteMailForm.controls['userName']"
                        required>
                    <mat-error>
                        <div
                            *ngIf="inviteMailForm.controls['userName'].invalid && inviteMailForm.controls['userName'].touched">
                            <small class="font13">
                                Email is Required
                            </small>
                        </div>
                    </mat-error>
                </mat-form-field>
            </div>
            <div class="col-12 pt-1">
                <mat-label class="font-weight-bold">Billing Option:</mat-label>
                <div class="pt-1 pb-3">
                    <mat-radio-group color="primary" aria-label="Select an option"
                        [formControl]="inviteMailForm.controls['isSelfPaid']">
                        <mat-radio-button value="true" class="pr-3">
                            Pay Bill Directly
                        </mat-radio-button>
                        <mat-radio-button value="false">
                            Bill Paid by Organization
                        </mat-radio-button>
                    </mat-radio-group>
                </div>
            </div>
        </div>
    </div>
    <div class="d-flex justify-content-between">
        <button class="button-purple px-4 py-1" mat-raised-button [disabled]="inviteMailForm.invalid"
            (click)="onEmailInvite()">
            Submit
        </button>
        <button mat-raised-button class="button-purple px-4 py-1" (click)="closeModal()">
            Close
        </button>
    </div>
</ng-template>



<ng-template #updateOrganization>
    <div>
        <h2 class="text-center font-weight-bold">Update Changes.</h2>
    </div>

    <div class="col-12 p-0">
        <mat-form-field appearance="fill" class="w-100 p-1">
            <mat-label>Organization Name</mat-label>
            <input type="text" matInput placeholder="Organization Name"
                [formControl]="organisationForm.controls['name']" required>
            <mat-error>
                <div *ngIf="organisationForm.controls['name'].invalid && organisationForm.controls['name'].touched">
                    <small class="font13">
                        Organization Name is Required
                    </small>
                </div>
            </mat-error>
        </mat-form-field>
    </div>

    <div class="row">
        <div class="col-6 pl-3">
            <mat-form-field appearance="fill" class="w-100 p-1">
                <mat-label>Street1</mat-label>
                <input type="text" matInput placeholder="Street1" [formControl]="organisationForm.controls['street1']"
                    required>
                <mat-error>
                    <div
                        *ngIf="organisationForm.controls['street1'].invalid && organisationForm.controls['street1'].touched">
                        <small class="font13">
                            Street1 is Required
                        </small>
                    </div>
                </mat-error>
            </mat-form-field>
        </div>
        <div class="col-6 pr-3">
            <mat-form-field appearance="fill" class="w-100 p-1">
                <mat-label>Street2</mat-label>
                <input type="text" matInput placeholder="Street2" [formControl]="organisationForm.controls['street2']">
                <mat-error>
                    <div
                        *ngIf="organisationForm.controls['street2'].invalid && organisationForm.controls['street2'].touched">
                        <small class="font13">
                            Street2 is Required
                        </small>
                    </div>
                </mat-error>
            </mat-form-field>
        </div>
    </div>

    <div class="row">
        <div class="col-6 pl-3">
            <mat-form-field appearance="fill" class="w-100 p-1">
                <mat-label>City</mat-label>
                <input type="text" matInput placeholder="City" [formControl]="organisationForm.controls['city']"
                    required>
                <mat-error>
                    <div *ngIf="organisationForm.controls['city'].invalid && organisationForm.controls['city'].touched">
                        <small class="font13">
                            City is Required
                        </small>
                    </div>
                </mat-error>
            </mat-form-field>
        </div>
        <div class="col-6 pr-3">
            <mat-form-field appearance="fill" class="w-100 p-1">
                <mat-label>State</mat-label>
                <input type="text" matInput placeholder="State" [formControl]="organisationForm.controls['state']">
                <mat-error>
                    <div
                        *ngIf="organisationForm.controls['state'].invalid && organisationForm.controls['state'].touched">
                        <small class="font13">
                            State is Required
                        </small>
                    </div>
                </mat-error>
            </mat-form-field>
        </div>
    </div>
    <div class="row">
        <div class="col-6 pl-3">
            <mat-form-field appearance="fill" class="w-100 p-1">
                <mat-label>Country</mat-label>
                <input type="text" matInput placeholder="Country" [formControl]="organisationForm.controls['country']"
                    required>
                <mat-error>
                    <div
                        *ngIf="organisationForm.controls['country'].invalid && organisationForm.controls['country'].touched">
                        <small class="font13">
                            Country is Required
                        </small>
                    </div>
                </mat-error>
            </mat-form-field>
        </div>
        <div class="col-6 pr-3">
            <mat-form-field appearance="fill" class="w-100 p-1">
                <mat-label>Zip</mat-label>
                <input type="text" matInput placeholder="Zip" [formControl]="organisationForm.controls['zip']">
                <mat-error>
                    <div *ngIf="organisationForm.controls['zip'].invalid && organisationForm.controls['zip'].touched">
                        <small class="font13">
                            Zip is Required
                        </small>
                    </div>
                </mat-error>
            </mat-form-field>
        </div>
    </div>
    <div class="row px-3">
        <mat-form-field appearance="fill" class="w-100 p-1">
            <mat-label>Practice Areas</mat-label>
            <mat-select [formControl]="toppings" multiple [formControl]="organisationForm.controls['specialty']"
                required>
                <span class="pl-3">Select Practice Areas</span>
                <mat-option *ngFor="let specialty of specialtyList" value="{{specialty.specialtyType}}">
                    {{specialty.specialtyType}}&nbsp;
                </mat-option>
            </mat-select>
            <mat-error>
                <div
                    *ngIf="organisationForm.controls['specialty'].invalid && organisationForm.controls['specialty'].touched">
                    <small class="font13">
                        Practice Areas is Required
                    </small>
                </div>
            </mat-error>
        </mat-form-field>
    </div>
    <div class="row">
        <div class=" col-6 pl-3">
            <mat-form-field appearance="fill" class="w-100 p-1">
                <mat-label>Tagline</mat-label>
                <input type="text" matInput [formControl]="organisationForm.controls['tagline']">
                <mat-error>
                    <div
                        *ngIf="organisationForm.controls['tagline'].invalid && organisationForm.controls['tagline'].touched">
                        <small class="font13">
                            Tagline is Required
                        </small>
                    </div>
                </mat-error>
            </mat-form-field>
        </div>
        <div class="col-6 pr-3">
            <mat-form-field appearance="fill" class="w-100 p-1">
                <mat-label>Color Picker</mat-label>
                <input matInput [(colorPicker)]="selectedColor" [value]="selectedColor" [cpCancelButton]="true"
                    [cpHeight]="'310px'" [formControl]="organisationForm.controls['colorPiker']"
                    (colorPickerChange)="buttonColor($event)" />
            </mat-form-field>
        </div>
    </div>
    <div class="row px-3">
        <mat-form-field appearance="fill" class="w-100 p-1">
            <mat-label>Description</mat-label>
            <textarea [formControl]="organisationForm.controls['description']" rows="8" cols="50" matInput
                placeholder="Description..."></textarea>
            <mat-error>
                <div
                    *ngIf="organisationForm.controls['description'].invalid && organisationForm.controls['description'].touched">
                    <small class="font13">
                        Description Required
                    </small>
                </div>
            </mat-error>
        </mat-form-field>
    </div>
    <div class="row px-3">
        <div class="card-body px-0 pt-3 pb-4">
            <div class="drag-border p-3">
                <h4 class="font-weight-bold margin-remove">Your Logo</h4>
                <div ng2FileDrop [ngClass]="{'another-file-over-class': hasAnotherDropZoneOver}"
                    (fileOver)="fileOverAnother($event)" [uploader]="uploader1"
                    class="box-placeholder my-drop-zone font-weight-bold pb-2">
                    Drag and drop files here (or) Choose below to attach.
                </div>
                <label for="file1" class="file-upload mb-0">
                    <input id="file1" type="file" ng2FileSelect [uploader]="uploader1" />
                </label>
            </div>
            <div class="px-3">
                <table class="table m-0">
                    <tbody>
                        <tr class="pr-0" *ngFor="let item of uploader1?.queue">
                            <td class="pr-0"><strong>{{item?.file?.name}}</strong></td>
                            <td nowrap class="pr-0">
                                <button mat-raised-button color="warn" (click)="item.remove()">
                                    <mat-icon>delete</mat-icon>Remove
                                </button>
                            </td>
                            <td>
                                <button mat-raised-button color="primary" (click)="onUploadLogo()">
                                    <mat-icon>file_upload</mat-icon>Upload
                                </button>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <div *ngIf="uploader1?.queue?.length > 0" class="d-flex align-items-end justify-content-center pr-2">
                <div class="pr-3">
                    <mat-radio-group color="primary" aria-label="Select an option" [(ngModel)]="fileType">
                    </mat-radio-group>
                </div>
            </div>
        </div>
    </div>
    <div class="d-flex justify-content-between">
        <button mat-raised-button class="button-purple px-4 py-1" (click)="closeModal()">
            Close
        </button>
        <button class="button-purple px-4 py-1" mat-raised-button (click)="saveChanges()">
            {{buttonText}}
        </button>
    </div>
</ng-template>