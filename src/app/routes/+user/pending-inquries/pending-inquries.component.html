<div class="col-12 pl-0">
    <div class="d-flex justify-content-between align-items-center pb-3">
        <div>
            <h1 class="line-height font-weight-bold">Pending Inquiries</h1>
            <h4 class="line-height header-sub-text">
                View and manage your inquiries to new Lawyers. When both you and the lawyer accept the Connection, your lawyer will be able to chat with you and upload files to your Case.
            </h4>
        </div>
        <div>
            <mat-checkbox class="mat-card check-style" color="primary" title="View Rejected Cases"
                (change)="viewhidePendingInquiries($event.checked)">
                View Rejected Inquiries
            </mat-checkbox>
        </div>
    </div>
    <mat-card>
        <div class="row">
            <div class="col-5">
                <mat-form-field class="w-100">
                    <mat-label>Search</mat-label>
                    <input matInput (keyup)="search($event.target.value)">
                </mat-form-field>
            </div>
        </div>
        <table mat-table [dataSource]="dataSource" matSort class="mat-elevation-z8 w-100">
            <ng-container matColumnDef="lawFirm">
                <th mat-header-cell *matHeaderCellDef mat-sort-header>Law Firm</th>
                <td mat-cell *matCellDef="let case">
                    {{case?.Organization?.name}}
                </td>
            </ng-container>
            <ng-container matColumnDef="lawyer">
                <th mat-header-cell *matHeaderCellDef mat-sort-header>Lawyer</th>
                <td mat-cell *matCellDef="let case">
                    <span>{{case?.firstName}} {{case?.middleName}} {{case?.lastName}}</span>
                </td>
            </ng-container>
            <ng-container matColumnDef="sent">
                <th mat-header-cell *matHeaderCellDef mat-sort-header>Sent</th>
                <td mat-cell *matCellDef="let case">
                    {{case?.sent | date:'MM/dd/yyyy'}}</td>
            </ng-container>
            <ng-container matColumnDef="status">
                <th mat-header-cell *matHeaderCellDef mat-sort-header>Status</th>
                <td mat-cell *matCellDef="let case">{{case?.statusDeclared}}</td>
            </ng-container>
            <ng-container matColumnDef="action">
                <th mat-header-cell *matHeaderCellDef>Action</th>
                <td mat-cell *matCellDef="let case">
                    <button
                        [disabled]="(case.status === 'inmate_rejected'  || case.status === 'inmate_accepted' ||  case.status === 'Rejected' ||  case.status === 'Requested')"
                        class="btn btn-sm btn-primary" color="green"
                        (click)="onClickStatus('inmate_accepted',case.userId,case.caseId)">
                        Accept
                    </button>
                    <button
                        [disabled]="(case.status === 'inmate_rejected' || case.status === 'Rejected' ||case.status === 'Requested')"
                        class="btn btn-sm btn-warning" color=""
                        (click)="onClickStatus('inmate_rejected',case.userId,case.caseId)">
                        Reject
                    </button>
                    <button [disabled]="( case.status === 'inmate_rejected' || case.status === 'Rejected')"
                        class="btn btn-sm btn-dark" (click)="onOpenModal(openModal,case.userId)">
                        Message
                    </button>
                </td>
            </ng-container>
            <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
        </table>
        <mat-paginator [pageSizeOptions]="getPageSizeOptions()"></mat-paginator>
    </mat-card>

</div>

<ng-template #openModal>
    <div>
        <h2 class="text-center font-weight-bold">Do you want to chat more? </h2>
    </div>
    <div class="d-flex justify-content-between py-2">
        <button mat-raised-button class="button-purple px-4 py-1" (click)="closeModal()">
            No
        </button>
        <button class="button-purple px-4 py-1" mat-raised-button (click)="saveChanges()">
            Yes
        </button>
    </div>
</ng-template>
